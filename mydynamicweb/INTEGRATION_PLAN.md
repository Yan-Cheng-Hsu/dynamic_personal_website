# ğŸš€ Portfolio Website Integration Plan

> **Author**: Bill Hsu
> **Date**: 2024-11-24
> **Objective**: Complete integration of Scheduling, Analytics, and Deployment

---

## ğŸ“‹ Table of Contents
1. [Current Status](#current-status)
2. [Three Main Features](#three-main-features)
3. [Architecture Overview](#architecture-overview)
4. [Implementation Plan](#implementation-plan)
5. [Technology Stack](#technology-stack)
6. [Deployment Strategy](#deployment-strategy)

---

## ğŸ¯ Current Status

### âœ… Completed
- Landing page with brand logos (Amazon, Alibaba, Unitree)
- LinkedIn integration with official logo
- Calendly account setup: `https://calendly.com/bill-ych-jobs/30min`
- Basic Analytics tracking (frontend only)
- Schedule form UI (not functional)

### âŒ Missing
- Schedule form doesn't send notifications
- No visitor analytics dashboard
- Not deployed to Vercel
- No backend data persistence

---

## ğŸ¨ Three Main Features

### Feature 1: Schedule Integration ğŸ“…

**Goal**: Allow visitors to schedule calls via form OR Calendly

**Current Problem**:
- Form collects data but doesn't do anything
- No notification to Bill when someone submits

**Solution Options**:

#### Option A: Email Notification (Simplest) â­ Recommended
```
User fills form â†’ API sends email to bill.ych.jobs@gmail.com â†’ Bill manually schedules
```
**Pros**: Simple, no database needed
**Cons**: Manual work required

#### Option B: Calendly API Integration (Advanced)
```
User fills form â†’ API creates Calendly invitee â†’ Sends booking link to user
```
**Pros**: Fully automated
**Cons**: Requires Calendly paid plan ($12/month)

#### Option C: Direct Calendar Booking (Complex)
```
User fills form â†’ API books directly to Google Calendar â†’ Sends confirmation
```
**Pros**: No Calendly dependency
**Cons**: Complex OAuth implementation

**Recommendation**: **Option A** for now, can upgrade later

---

### Feature 2: Visitor Analytics Dashboard ğŸ“Š

**Goal**: See who visited the site, when, and from where

**Data to Track**:
- Timestamp
- IP Address & Geolocation
- Referrer (LinkedIn, Google, etc.)
- Device info (mobile/desktop)
- Pages visited
- Time spent on site
- Email (if they fill the schedule form)

**Storage Options**:

#### Option A: Vercel KV (Redis) â­ Recommended
```bash
npm i @vercel/kv
```
**Pros**: Built into Vercel, fast, free tier available
**Cons**: Limited storage in free tier

#### Option B: Google Sheets API
```
Each visit â†’ Append row to Google Sheet
```
**Pros**: Easy to view, no database setup
**Cons**: Slower, rate limits

#### Option C: PostgreSQL (Vercel Postgres)
```bash
npm i @vercel/postgres
```
**Pros**: Proper database, SQL queries
**Cons**: More complex setup

**Recommendation**: **Vercel KV** (simplest for MVP)

**Dashboard Features**:
- Protected route: `/admin/analytics` (password protected)
- Real-time visitor count
- List of recent visitors with details
- Chart showing visits over time
- Export to CSV

---

### Feature 3: Vercel Deployment ğŸš€

**Goal**: Deploy to production with proper configuration

**Pre-deployment Checklist**:
- [ ] Set environment variables
- [ ] Configure Vercel Analytics
- [ ] Setup custom domain (optional)
- [ ] Enable Google Analytics
- [ ] Test all API routes

**Environment Variables Needed**:
```env
# Email Service (for schedule notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=bill.ych.jobs@gmail.com
SMTP_PASS=<app-password>

# Google Analytics
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Admin Dashboard
ADMIN_PASSWORD=<secure-password>

# Vercel KV (auto-provided by Vercel)
KV_URL=<auto-generated>
KV_REST_API_URL=<auto-generated>
KV_REST_API_TOKEN=<auto-generated>
```

**Deployment Steps**:
1. Create Vercel account
2. Connect GitHub repository
3. Configure environment variables in Vercel dashboard
4. Deploy from `main` branch
5. Enable Vercel Analytics
6. Test production site

---

## ğŸ—ï¸ Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (Next.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Landing Page  â”‚  Schedule Section  â”‚  Analytics Component  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚                   â”‚
         â–¼                â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Routes (Next.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /api/schedule   â”‚  /api/track     â”‚  /api/analytics         â”‚
â”‚ (Send email)    â”‚  (Log visitor)  â”‚  (Get stats - Protected)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                 â”‚
         â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    External Services                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Gmail SMTP     â”‚  Vercel KV      â”‚  Google Analytics       â”‚
â”‚  (Notifications)â”‚  (Visitor data) â”‚  (Page views)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Implementation Plan

### Phase 1: Schedule Integration (1-2 hours)

#### Step 1.1: Setup Gmail App Password
```
1. Go to Google Account â†’ Security
2. Enable 2FA
3. Generate App Password for "Mail"
4. Save password for environment variable
```

#### Step 1.2: Install Dependencies
```bash
npm install nodemailer @types/nodemailer
```

#### Step 1.3: Update /api/schedule.ts
```typescript
import nodemailer from 'nodemailer'

// Create email transporter
const transporter = nodemailer.createTransport({
  host: process.env.SMTP_HOST,
  port: parseInt(process.env.SMTP_PORT || '587'),
  secure: false,
  auth: {
    user: process.env.SMTP_USER,
    pass: process.env.SMTP_PASS,
  },
})

// Send email notification
await transporter.sendMail({
  from: process.env.SMTP_USER,
  to: 'bill.ych.jobs@gmail.com',
  subject: `New Schedule Request from ${company}`,
  html: `
    <h2>New Schedule Request</h2>
    <p><strong>Email:</strong> ${email}</p>
    <p><strong>Company:</strong> ${company}</p>
    <p><strong>Role:</strong> ${role}</p>
    <p><strong>Message:</strong> ${message}</p>
  `,
})

// Also log to KV for analytics
await kv.lpush('schedule_requests', {
  timestamp: new Date().toISOString(),
  email,
  company,
  role,
  message,
})
```

#### Step 1.4: Update ScheduleSection.tsx
```typescript
const handleSchedule = async (e: React.FormEvent) => {
  e.preventDefault()
  setLoading(true)

  try {
    const response = await fetch('/api/schedule', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, company, role, message }),
    })

    if (response.ok) {
      setSubmitted(true)
      // Track in analytics
      trackEvent('schedule_request', { company, role })
    } else {
      alert('Failed to send request. Please try Calendly link.')
    }
  } catch (error) {
    console.error(error)
    alert('Error. Please use the Calendly link below.')
  } finally {
    setLoading(false)
  }
}
```

---

### Phase 2: Visitor Analytics Dashboard (2-3 hours)

#### Step 2.1: Setup Vercel KV
```bash
# In Vercel dashboard
1. Go to Storage â†’ Create Database â†’ KV
2. Copy environment variables
3. Install locally: npm i @vercel/kv
```

#### Step 2.2: Update Analytics.tsx
```typescript
import { kv } from '@vercel/kv'

export function trackVisitor() {
  const visitorInfo = {
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent,
    language: navigator.language,
    screen: `${screen.width}x${screen.height}`,
    referrer: document.referrer,
    url: window.location.href,
    page: window.location.pathname,
  }

  // Send to API
  fetch('/api/track', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(visitorInfo),
  })
}
```

#### Step 2.3: Update /api/track.ts
```typescript
import { kv } from '@vercel/kv'

export default async function handler(req, res) {
  if (req.method === 'POST') {
    const visitorData = {
      ...req.body,
      ip: req.headers['x-forwarded-for'] || req.socket.remoteAddress,
      timestamp: new Date().toISOString(),
    }

    // Store in KV (list of all visitors)
    await kv.lpush('visitors', visitorData)

    // Increment total count
    await kv.incr('visitor_count')

    return res.status(200).json({ success: true })
  }

  res.status(405).json({ error: 'Method not allowed' })
}
```

#### Step 2.4: Create /api/analytics.ts (Protected)
```typescript
import { kv } from '@vercel/kv'

export default async function handler(req, res) {
  // Simple password protection
  const { password } = req.query

  if (password !== process.env.ADMIN_PASSWORD) {
    return res.status(401).json({ error: 'Unauthorized' })
  }

  const totalVisitors = await kv.get('visitor_count') || 0
  const recentVisitors = await kv.lrange('visitors', 0, 49) // Last 50
  const scheduleRequests = await kv.lrange('schedule_requests', 0, 19) // Last 20

  return res.status(200).json({
    totalVisitors,
    recentVisitors,
    scheduleRequests,
  })
}
```

#### Step 2.5: Create /pages/admin/analytics.tsx
```typescript
import { useState, useEffect } from 'react'
import { useRouter } from 'next/router'

export default function AnalyticsDashboard() {
  const [password, setPassword] = useState('')
  const [authenticated, setAuthenticated] = useState(false)
  const [data, setData] = useState(null)
  const router = useRouter()

  const login = async () => {
    const res = await fetch(`/api/analytics?password=${password}`)
    if (res.ok) {
      const data = await res.json()
      setData(data)
      setAuthenticated(true)
    } else {
      alert('Incorrect password')
    }
  }

  if (!authenticated) {
    return (
      <div style={{ padding: '2rem', maxWidth: '400px', margin: '0 auto' }}>
        <h1>Analytics Dashboard</h1>
        <input
          type="password"
          placeholder="Enter password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
        />
        <button onClick={login}>Login</button>
      </div>
    )
  }

  return (
    <div style={{ padding: '2rem' }}>
      <h1>Visitor Analytics</h1>
      <div>
        <h2>Total Visitors: {data?.totalVisitors}</h2>

        <h3>Recent Visitors</h3>
        <table>
          <thead>
            <tr>
              <th>Time</th>
              <th>Page</th>
              <th>Referrer</th>
              <th>Device</th>
            </tr>
          </thead>
          <tbody>
            {data?.recentVisitors?.map((v, i) => (
              <tr key={i}>
                <td>{new Date(v.timestamp).toLocaleString()}</td>
                <td>{v.page}</td>
                <td>{v.referrer || 'Direct'}</td>
                <td>{v.screen}</td>
              </tr>
            ))}
          </tbody>
        </table>

        <h3>Schedule Requests</h3>
        <table>
          <thead>
            <tr>
              <th>Time</th>
              <th>Email</th>
              <th>Company</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            {data?.scheduleRequests?.map((r, i) => (
              <tr key={i}>
                <td>{new Date(r.timestamp).toLocaleString()}</td>
                <td>{r.email}</td>
                <td>{r.company}</td>
                <td>{r.role}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  )
}
```

---

### Phase 3: Vercel Deployment (30 min)

#### Step 3.1: Install Vercel Analytics
```bash
npm i @vercel/analytics
```

Update `_app.tsx`:
```typescript
import { Analytics } from '@vercel/analytics/react'

export default function App({ Component, pageProps }) {
  return (
    <>
      <Component {...pageProps} />
      <Analytics />
    </>
  )
}
```

#### Step 3.2: Setup Google Analytics
```
1. Go to analytics.google.com
2. Create new property for your website
3. Get Measurement ID (G-XXXXXXXXXX)
4. Add to Vercel environment variables
```

Update `components/Analytics.tsx`:
```typescript
<Script
  src={`https://www.googletagmanager.com/gtag/js?id=${process.env.NEXT_PUBLIC_GA_ID}`}
  strategy="afterInteractive"
/>
```

#### Step 3.3: Create .env.example
```env
# Email Service
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Analytics
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Admin Dashboard
ADMIN_PASSWORD=your-secure-password

# Vercel KV (auto-provided by Vercel)
# KV_URL=
# KV_REST_API_URL=
# KV_REST_API_TOKEN=
```

#### Step 3.4: Update .gitignore
```gitignore
.env
.env.local
.vercel
```

#### Step 3.5: Deploy to Vercel
```bash
# Method 1: Via CLI
npm i -g vercel
vercel login
vercel

# Method 2: Via GitHub (Recommended)
1. Commit all changes
2. Push to GitHub
3. Go to vercel.com/new
4. Import your repository
5. Configure environment variables
6. Deploy
```

---

## ğŸ› ï¸ Technology Stack

### Frontend
- **Next.js 14.2.33**: React framework
- **TypeScript**: Type safety
- **Framer Motion**: Animations
- **CSS Modules**: Styling

### Backend (API Routes)
- **Next.js API Routes**: Serverless functions
- **Nodemailer**: Email notifications
- **Vercel KV**: Redis database

### External Services
- **Vercel**: Hosting & deployment
- **Calendly**: Meeting scheduling
- **Google Analytics 4**: Web analytics
- **Gmail SMTP**: Email delivery

### Development
- **Git**: Version control
- **npm**: Package management
- **ESLint**: Code linting

---

## ğŸ“Š Deployment Strategy

### Environment Setup

#### Local Development (.env.local)
```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=bill.ych.jobs@gmail.com
SMTP_PASS=<your-app-password>
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
ADMIN_PASSWORD=<local-dev-password>
```

#### Vercel Production
```
Set in Vercel Dashboard â†’ Settings â†’ Environment Variables:
- All variables from .env.local
- KV variables (auto-provided when you create KV database)
```

### Git Workflow
```bash
# Current branch
git checkout main

# Stage all changes
git add .

# Commit with descriptive message
git commit -m "feat: integrate scheduling, analytics, and deployment"

# Push to GitHub
git push origin main

# Vercel auto-deploys from main branch
```

### Post-Deployment Checklist
- [ ] Test schedule form â†’ Check email arrives
- [ ] Visit site â†’ Check analytics API logs visitor
- [ ] Visit /admin/analytics â†’ View dashboard
- [ ] Click Calendly link â†’ Test booking flow
- [ ] Check Google Analytics â†’ Verify events
- [ ] Test on mobile device
- [ ] Check all brand logos load correctly
- [ ] Test dark mode toggle

---

## ğŸ¯ Success Metrics

### Schedule Integration
- âœ… Form submission sends email within 1 minute
- âœ… Email contains all form data
- âœ… Calendly link works on all devices

### Analytics Dashboard
- âœ… Tracks all page visits
- âœ… Dashboard shows real-time data
- âœ… Password protection works
- âœ… Can export visitor data

### Deployment
- âœ… Site loads in < 2 seconds
- âœ… All API routes return 200 status
- âœ… No console errors
- âœ… Mobile responsive
- âœ… SSL certificate active

---

## ğŸ” Security Considerations

### Email
- Use Gmail App Password (not actual password)
- Never commit .env files to Git
- Rotate passwords every 90 days

### Analytics Dashboard
- Strong admin password (16+ characters)
- Consider adding IP whitelist
- Rate limiting on login attempts

### API Routes
- Validate all input data
- Sanitize user inputs
- Add CORS headers if needed

### Environment Variables
- Never expose in client-side code
- Use NEXT_PUBLIC_ prefix only for public vars
- Rotate secrets after team changes

---

## ğŸ“ˆ Future Enhancements (Post-MVP)

### Phase 4: Advanced Features
- [ ] Email templates with branding
- [ ] Automated follow-up emails
- [ ] Calendar sync (Calendly â†’ Google Calendar)
- [ ] Advanced analytics (funnel tracking)
- [ ] A/B testing for CTA buttons
- [ ] Newsletter signup integration
- [ ] Blog section with MDX
- [ ] Case studies page
- [ ] Testimonials collection form

### Phase 5: SEO & Performance
- [ ] Dynamic sitemap.xml
- [ ] Structured data (JSON-LD)
- [ ] Image optimization (WebP)
- [ ] Lazy loading
- [ ] CDN for static assets
- [ ] Lighthouse score > 95

### Phase 6: Marketing Integration
- [ ] LinkedIn pixel
- [ ] Facebook pixel (optional)
- [ ] UTM parameter tracking
- [ ] Heat mapping (Hotjar)
- [ ] Session recording
- [ ] Exit-intent popup

---

## ğŸ’° Cost Estimation

### Free Tier (MVP)
- **Vercel Hobby**: Free
- **Vercel KV**: Free tier (256MB)
- **Vercel Analytics**: Free (2,500 events/month)
- **Google Analytics**: Free
- **Calendly Free**: Free (1 event type)
- **Gmail SMTP**: Free

**Total: $0/month**

### Paid Upgrade (If needed)
- **Vercel Pro**: $20/month (custom domain, more bandwidth)
- **Vercel KV**: $20/month (1GB)
- **Calendly Standard**: $12/month (unlimited event types)

**Total: $52/month** (only if you exceed free tier)

---

## ğŸš¦ Implementation Timeline

### Day 1 (Today)
- âœ… Write this plan
- [ ] Setup Gmail App Password
- [ ] Implement schedule email notifications
- [ ] Test schedule form locally

### Day 2
- [ ] Setup Vercel KV database
- [ ] Implement visitor tracking
- [ ] Create analytics dashboard
- [ ] Test analytics locally

### Day 3
- [ ] Setup Google Analytics
- [ ] Install Vercel Analytics
- [ ] Configure environment variables
- [ ] Deploy to Vercel
- [ ] Test production site

---

## âœ… Final Checklist Before Going Live

### Code
- [ ] All TypeScript errors resolved
- [ ] No console.log in production code
- [ ] Error handling for all API routes
- [ ] Loading states for all async operations

### Configuration
- [ ] All environment variables set in Vercel
- [ ] .env files not committed to Git
- [ ] SMTP credentials tested
- [ ] Admin password set and saved securely

### Testing
- [ ] Schedule form sends email
- [ ] Analytics tracks visitors
- [ ] Dashboard displays data
- [ ] Calendly link works
- [ ] Mobile responsive
- [ ] All links work

### Documentation
- [ ] README.md updated
- [ ] .env.example created
- [ ] Deployment instructions clear
- [ ] API documentation written

---

## ğŸ“ Support & Resources

### Documentation
- [Next.js Docs](https://nextjs.org/docs)
- [Vercel Docs](https://vercel.com/docs)
- [Vercel KV Docs](https://vercel.com/docs/storage/vercel-kv)
- [Nodemailer Docs](https://nodemailer.com/)
- [Calendly API Docs](https://developer.calendly.com/)

### Troubleshooting
- Check Vercel logs: `vercel logs <deployment-url>`
- Test API routes: Use Postman or `curl`
- Email issues: Check Gmail "Less secure apps" settings
- KV issues: Verify environment variables

---

## ğŸ‰ Conclusion

This plan provides a complete roadmap for:
1. âœ… **Schedule Integration**: Form â†’ Email notification
2. âœ… **Analytics Dashboard**: Track visitors & view stats
3. âœ… **Vercel Deployment**: Production-ready hosting

**Estimated Total Time**: 4-6 hours
**Total Cost**: $0 (using free tiers)
**Difficulty**: Intermediate

---

**Ready to implement? Let's start with Phase 1! ğŸš€**
